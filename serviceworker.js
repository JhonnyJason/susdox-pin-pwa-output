(()=>{"use strict";var e,n,t,a,s,i,r,c,l,o,p,g,f,d,h,u,m,v,w,y,$,A,P,E="v0.0.5";w=function(e){return console.log(`[serviceworker] ${e}`)},n="PIN-PWA_app",d="PIN-PWA_user-images",a=["PIN-PWAmain","PIN-PWAimages","PIN-PWAfonts"],c=["/","/manifest.json","/img/icon.png","/img/sustsol_logo.png"],A=["/android-chrome-96x96.png","/android-chrome-192x192.png","/android-chrome-512x512.png","/apple-touch-icon.png","/browserconfig.xml","/favicon.ico","/favicon-16x16.png","/favicon-32x32.png","/mstile-70x70.png","/mstile-144x144.png","/mstile-150x150.png","/mstile-310x150.png","/mstile-310x310.png","/safari-pinned-tab.svg"],l=/.(o|t)tf$|.woff2?$/,h=/.png$|.jpg$|.jpeg$|.webp$|.gif$/,P={ignoreSearch:!0},$=async function(){var n,t,a;for(w("onRegister"),self.addEventListener("activate",e),self.addEventListener("fetch",r),self.addEventListener("install",m),self.addEventListener("message",y),t=0,a=(n=await self.clients.matchAll({includeUncontrolled:!0})).length;t<a;t++)n[t].postMessage("postRegister");w(`postRegister: found ${n.length} clients!`)},e=function(e){w("activateEventHandler"),e.waitUntil(self.clients.claim()),w("clients have been claimed!")},r=function(e){e.respondWith(t(e.request))},m=function(e){w("installEventHandler"),self.skipWaiting(),w("skipped waiting :-)"),e.waitUntil(u())},y=async function(e){var n,t,a,s;if(w("messageEventHandler"),w("typeof data is "+typeof e.data),w(JSON.stringify(e.data,null,4)),w(`I am version ${E}!`),"tellMeVersion"===e.data)for(n=await self.clients.matchAll({includeUncontrolled:!0}),s={version:E},t=0,a=n.length;t<a;t++)n[t].postMessage(s);"deleteImageCache"===e.data&&await caches.delete(d)},u=async function(){w("installAppCache");try{return await s(a),(await caches.open(n)).addAll(c)}catch(e){w(`Error on installAppCache: ${e.message}`)}},t=async function(e){var n;w("cacheThenNetwork");try{n=await caches.match(e,P)}catch(e){w(e)}return null!=n?n:p(e)},s=async function(e){var n,t,a;for(w("deleteCaches"),n=0,t=e.length;n<t;n++)a=e[n],caches.delete(a);try{return await Promise.all(promises)}catch(e){w(`Error in deleteCaches: ${e.message}`)}},p=function(e){var n;return w("handleCacheMiss"),n=new URL(e.url),v(n.pathname)?o(e):l.test(n.pathname)?g(e):h.test(n.pathname)?f(e):fetch(e)},o=async function(e){w("handleAppFileMiss"),w(e.url);try{return await i(e,n)}catch(e){w(`Error on handleAppFileMiss: ${e.message}`)}},f=async function(e){w("handleImageMiss"),w(e.url);try{return await i(e,d)}catch(e){w(`Error on handleImageMiss: ${e.message}`)}},g=async function(e){w("handleFontMiss"),w(e.url);try{return await i(e,"PIN-PWA_fonts")}catch(e){w(`Error on fontImageMiss: ${e.message}`)}},i=async function(e,n){var t,a;return t=await caches.open(n),a=await fetch(e),t.put(e,a.clone()),a},v=function(e){return w("isOptionalAppFile"),w(e),!!A.includes(e)},$()})();